<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="瑞洋建材">
    <meta name="keywords" content="瑞洋建材">
    <meta name="author" content="Mr wang">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>瑞洋建材</title>
    <link rel="shortcut icon" href="./image/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./font/iconfont.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <script async type="text/javascript" src="//api.map.baidu.com/api?v=2.0&ak=6AyDuiGEcCCPI0oE6FKspQQ9NyZPCok0"></script>
</head>

<body>
    <div class="container-fluid">
        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container-fluid">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand logo" href="#">
                        <img alt="Brand" src="./image/favicon.ico">
                    </a>
                    <a class="navbar-brand" href="#">Hi, 欢迎</a>
                    <!-- 来到瑞洋建材 -->
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav navbar-right">
                        <!-- <li class="active"><a href="#">Link <span class="sr-only">(current)</span></a></li> -->
                        <li><a href="#首页">首页</a></li>
                        <li><a href="#关于我们">关于我们</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="row">
            <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-10 col-md-offset-1 col-lg-10"  style="padding: 10px 0px;">
                
            </div>
        </div>
        <div class="row" id="carousel">
            <div id="myCarousel" class="carousel canvasPosition slide col-xs-12 col-sm-10 col-sm-offset-1 col-md-10 col-md-offset-1 col-lg-10">
                <!-- 轮播（Carousel）指标 -->
                <ol class="carousel-indicators">
                    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                    <li data-target="#myCarousel" data-slide-to="1"></li>
                    <li data-target="#myCarousel" data-slide-to="2"></li>
                </ol>
                <!-- 轮播（Carousel）项目 -->
                <div class="carousel-inner">
                    <div class="item active">
                        <img src="./image/timg.jpg" alt="First slide">
                    </div>
                    <div class="item">
                        <img src="./image/timgcar.jpg" alt="Second slide">
                    </div>
                    <div class="item">
                        <img src="./image/timgcars.jpg" alt="Third slide">
                    </div>
                </div>
                <!-- 轮播（Carousel）导航 -->
                <a class="left carousel-control left_next iconfont icon-fanhui" href="#myCarousel" role="button" data-slide="prev"></a>
                <a class="right carousel-control right_next iconfont icon-gengduo" href="#myCarousel" role="button" data-slide="next"></a>
            </div>
        </div>
        <!-- <div class="row">
            <div class="col-xs-12 col-sm-6 col-md-12">
                <canvas id="canvas"></canvas>
            </div>
        </div> -->
        <!-- <div class="row">
            <div class="col-xs-12 col-sm-6 col-md-12">
                <ul class="nav nav-tabs">
                    <li role="presentation" class="active"><a href="#">Home</a></li>
                    <li role="presentation"><a href="#">Profile</a></li>
                    <li role="presentation"><a href="#">Messages</a></li>
                    <li role="presentation"><a href="#">Messages</a></li>
                  </ul>
            </div>
        </div> -->
        <div class="row maps" id="map">
            <div class="col-xs-12 col-sm-10 col-sm-offset-1 col-md-10 col-md-offset-1 col-lg-10"  style="padding: 10px 0px;">
                <div class="panel panel-default">
                    <div class="panel-heading">地理位置(Location Information)</div>
                    <div class="panel-body">
                        <div class="input-group" style="margin: 10px 5px;">
                            <span class="input-group-btn">
                                <button class="btn btn-default" type="button">Go !</button>
                            </span>
                            <input type="text" id="suggestId" size="30" class="form-control" placeholder="Search for...">
                        </div>
                        <div class="input-group" style="margin: 10px 5px;">
                            <span class="input-group-btn">
                                <button class="btn btn-default" type="button">经度</button>
                            </span>
                            <input type="text" id="longitude" size="30" class="form-control" placeholder="longitude">
                        </div>
                        <div class="input-group" style="margin: 10px 5px;">
                            <span class="input-group-btn">
                                <button class="btn btn-default" type="button">维度</button>
                            </span>
                            <input type="text" id="latitude" size="30" class="form-control" placeholder="latitude">
                        </div>
                        <div id="searchResultPanel" style="border:1px solid #C0C0C0;width:300px;height:600px;position:absolute;left: 650px;top:20px;display: none;"></div>
                        <div id="allmap" class="allmap" style="min-width: 500px;height: 700px;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            
        </div>
    </div>

<script src="./js/jquery.min.js"></script>
<script src="./js/bootstrap.min.js"></script>

<script>
    var lng = document.getElementById('longitude');
    var lat = document.getElementById('latitude');
    // 百度地图API功能
    var map = new BMap.Map("allmap");    // 创建Map实例
    // getGeolocation();
    // map.centerAndZoom(new BMap.Point(113.42, 34.44), 15);
    map.centerAndZoom('新郑机场', 12);
    //添加地图类型控件
    // map.addControl(new BMap.MapTypeControl({
    //     mapTypes:[
    //         BMAP_NORMAL_MAP,
    //         BMAP_HYBRID_MAP
    //     ]
    // }));
    var geolocation = new BMap.Geolocation();
    geolocation.getCurrentPosition(function(r){
        if(this.getStatus() == BMAP_STATUS_SUCCESS){
            var mk = new BMap.Marker(r.point);
            // var mk = new BMap.Marker(new BMap.Point(r.point))
            map.addOverlay(mk);
            map.panTo(r.point);
            // getGeolocation(r.point.lng, r.point.lat);
            // alert('您的位置：'+r.point.lng+','+r.point.lat);
        }
        else {
            alert('failed'+this.getStatus());
        }        
    });
    map.setCurrentCity("郑州");          // 设置地图显示的城市 此项是必须设置的
    map.enableScrollWheelZoom(true);     //开启鼠标滚轮缩放

    //  定位城市
    // function myFun(result){
    //     var cityName = result.name;
    //     map.setCenter(cityName);
    //     console.log(result);
    //     alert("当前定位城市:"+cityName);
    // }
    // var myCity = new BMap.LocalCity();
    // myCity.get(myFun); 
    function getGeolocation(lng = 113.42, lat = 34.44) {
        map.centerAndZoom(new BMap.Point(lng, lat), 15);  // 初始化地图,设置中心点坐标和地图级别
    }
    function G(id) {
        console.log(document.getElementById(id), 'document.getElementById(id)')
        return document.getElementById(id);
    }

    //  自定义搜索
    var ac = new BMap.Autocomplete(    //建立一个自动完成的对象
        {"input" : "suggestId"
        ,"location" : map
    });

    ac.addEventListener("onhighlight", function(e) {  //鼠标放在下拉列表上的事件
        
        var str = "";
        var _value = e.fromitem.value;
        var value = "";
        if (e.fromitem.index > -1) {
            value = _value.province +  _value.city +  _value.district +  _value.street +  _value.business;
        }    
        str = "FromItem<br />index = " + e.fromitem.index + "<br />value = " + value;
        
        value = "";
        if (e.toitem.index > -1) {
            _value = e.toitem.value;
            value = _value.province +  _value.city +  _value.district +  _value.street +  _value.business;
        }    
        str += "<br />ToItem<br />index = " + e.toitem.index + "<br />value = " + value;
        // G("searchResultPanel").innerHTML = str;
    });

    var myValue;
    ac.addEventListener("onconfirm", function(e) {    //鼠标点击下拉列表后的事件
        lng.value = '';
        lat.value = '';
        var _value = e.item.value;
        myValue = _value.province +  _value.city +  _value.district +  _value.street +  _value.business;
        G("searchResultPanel").innerHTML ="onconfirm<br />index = " + e.item.index + "<br />myValue = " + myValue;
        
        setPlace();
    });


    function setPlace(){// 创建地址解析器实例
        var myGeo = new BMap.Geocoder();// 将地址解析结果显示在地图上,并调整地图视野
        myGeo.getPoint(myValue, function(point){
            if (point) {
                map.centerAndZoom(point, 16);
                map.addOverlay(new BMap.Marker(point));
            }
        }, "北京");
    }

    map.addEventListener('click', function (e) {        
        lng.value = e.point.lng;
        lat.value = e.point.lat;
    })

//  自定义搜索

    </script>

    <!-- <script>
        $(function () {
            navigator.geolocation.getCurrentPosition(translatePoint); //定位 
        });
        function translatePoint(position) {
            var currentLat = position.coords.latitude;//经度
            var currentLon = position.coords.longitude;//纬度
            var gpsPoint = new BMap.Point(currentLon, currentLat);
            BMap.Convertor.translate(gpsPoint, 0, initMap); //转换坐标 
        }
        function initMap(point) {
            //初始化地图 
            map = new BMap.Map("allmap");//实例化容器
            map.addControl(new BMap.NavigationControl());//平移缩放控件
            map.addControl(new BMap.ScaleControl());//比例尺控件
            map.addControl(new BMap.OverviewMapControl());//缩略地图控件
            map.centerAndZoom(point, 15);//地图初始化，参数地图坐标和级别
            map.addOverlay(new BMap.Marker(point));//当前位置加标记
            var myZoomCtrl = new ZoomControl();
            map.addControl(myZoomCtrl);
            function ZoomControl() {
                this.defaultAnchor = BMAP_ANCHOR_TOP_LEFT; //调整控件的位置
                this.defaultOffset = new BMap.Size(10, 10);//通过像素调整位置
            }
            //自定义控件，点击两下实现放大
            ZoomControl.prototype = new BMap.Control();
            ZoomControl.prototype.initialize = function (map) {
                var div = document.createElement("div");
                div.appendChild(document.createTextNode("放大2级"));
                div.style.cursor = "pointer";
                div.style.border = "1px solid gray";
                div.style.backgroundColor = "white";
                div.onclick = function (e) {
                    map.zoomTo(map.getZoom() + 2);
                }
                map.getContainer().appendChild(div);
                return div;
            }
        }
    </script> -->

</body>

</html>